<div class="wrapper">
  <div class='container'>
    <h1>Recordings for <%= current_user.email%></h1>
    <% unless @recordings.nil?%>
      <% @recordings.each do |recording| %>
        <div class='row justify-content-center'>
          <div class="col-6">   
            Recording on <%= recording.created_at.strftime("%b %e, %l:%M %p") %>
            <div class="waveform" id="recording-<%=recording.id%>" data-src-url="<%= recording.url %>">
            </div>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>
</div>
  <script src="https://unpkg.com/wavesurfer.js"></script>

<script>
  recordingDivs = document.querySelectorAll('.waveform')
  recordingDivs.forEach((div) => {
    let wavesurfer = WaveSurfer.create({
    container: `#${div.id}`,
    waveColor: 'violet',
    progressColor: 'purple'
});
  let wavesurferUrl = div.getAttribute('data-src-url');
  wavesurfer.load(wavesurferUrl);
  });
</script>
